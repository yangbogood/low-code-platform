# å›½é™…åŒ– (i18n) ä½¿ç”¨æŒ‡å—

## æ¦‚è¿°

æœ¬é¡¹ç›®å·²é›†æˆå®Œæ•´çš„å›½é™…åŒ–åŠŸèƒ½ï¼Œæ”¯æŒä¸­æ–‡å’Œè‹±æ–‡åŒè¯­åˆ‡æ¢ã€‚ä½¿ç”¨ `react-i18next` ä½œä¸ºå›½é™…åŒ–è§£å†³æ–¹æ¡ˆã€‚

## åŠŸèƒ½ç‰¹æ€§

- âœ… **åŒè¯­æ”¯æŒ**: ä¸­æ–‡ (zh-CN) å’Œè‹±æ–‡ (en-US)
- âœ… **è‡ªåŠ¨è¯­è¨€æ£€æµ‹**: åŸºäºæµè§ˆå™¨è¯­è¨€è®¾ç½®
- âœ… **æœ¬åœ°å­˜å‚¨**: è®°ä½ç”¨æˆ·é€‰æ‹©çš„è¯­è¨€
- âœ… **åŠ¨æ€åˆ‡æ¢**: å®æ—¶åˆ‡æ¢è¯­è¨€ï¼Œæ— éœ€åˆ·æ–°é¡µé¢
- âœ… **å®Œæ•´è¦†ç›–**: æ‰€æœ‰UIæ–‡æ¡ˆéƒ½å·²å›½é™…åŒ–

## æ–‡ä»¶ç»“æ„

```
src/
â”œâ”€â”€ i18n/
â”‚   â”œâ”€â”€ index.ts                 # i18n é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ locales/
â”‚       â”œâ”€â”€ zh-CN.json          # ä¸­æ–‡è¯­è¨€åŒ…
â”‚       â””â”€â”€ en-US.json          # è‹±æ–‡è¯­è¨€åŒ…
â”œâ”€â”€ components/
â”‚   â””â”€â”€ LanguageSwitch.tsx      # è¯­è¨€åˆ‡æ¢ç»„ä»¶
â””â”€â”€ data/
    â””â”€â”€ componentLibraryI18n.ts # ç»„ä»¶åº“å›½é™…åŒ–æ•°æ®
```

## ä½¿ç”¨æ–¹æ³•

### 1. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ç¿»è¯‘

```tsx
import { useTranslation } from 'react-i18next';

const MyComponent = () => {
  const { t } = useTranslation();
  
  return (
    <div>
      <h1>{t('app.title')}</h1>
      <p>{t('app.description')}</p>
    </div>
  );
};
```

### 2. å¸¦å‚æ•°çš„ç¿»è¯‘

```tsx
const { t } = useTranslation();

// ä½¿ç”¨å‚æ•°
t('placeholders.enterText', { label: 'ç”¨æˆ·å' })
// ä¸­æ–‡: "è¯·è¾“å…¥ç”¨æˆ·å"
// è‹±æ–‡: "Please enter ç”¨æˆ·å"
```

### 3. è¯­è¨€åˆ‡æ¢

```tsx
import { LanguageSwitch } from './components/LanguageSwitch';

// æŒ‰é’®å¼åˆ‡æ¢
<LanguageSwitch type="button" size="middle" />

// å›¾æ ‡å¼åˆ‡æ¢
<LanguageSwitch type="icon" size="middle" />
```

## è¯­è¨€åŒ…ç»“æ„

### ä¸»è¦åˆ†ç±»

- **common**: é€šç”¨è¯æ±‡ (ä¿å­˜ã€å–æ¶ˆã€ç¡®è®¤ç­‰)
- **app**: åº”ç”¨ç›¸å…³ (æ ‡é¢˜ã€æè¿°ç­‰)
- **toolbar**: å·¥å…·æ æ–‡æ¡ˆ
- **sidebar**: ä¾§è¾¹æ æ–‡æ¡ˆ
- **components**: ç»„ä»¶ç›¸å…³æ–‡æ¡ˆ
- **categories**: ç»„ä»¶åˆ†ç±»
- **theme**: ä¸»é¢˜ç›¸å…³
- **language**: è¯­è¨€ç›¸å…³
- **messages**: æç¤ºæ¶ˆæ¯
- **placeholders**: å ä½ç¬¦æ–‡æ¡ˆ
- **codeGenerator**: ä»£ç ç”Ÿæˆå™¨æ–‡æ¡ˆ

### ç¤ºä¾‹è¯­è¨€åŒ…

```json
{
  "common": {
    "save": "ä¿å­˜",
    "cancel": "å–æ¶ˆ",
    "confirm": "ç¡®è®¤"
  },
  "components": {
    "button": {
      "name": "æŒ‰é’®",
      "description": "å¯ç‚¹å‡»çš„æŒ‰é’®ç»„ä»¶",
      "text": "æŒ‰é’®æ–‡æœ¬",
      "types": {
        "default": "é»˜è®¤",
        "primary": "ä¸»è¦"
      }
    }
  }
}
```

## å·²å›½é™…åŒ–çš„ç»„ä»¶

### 1. ä¸»åº”ç”¨ (App.tsx)
- åº”ç”¨æ ‡é¢˜
- å·¥å…·æ æŒ‰é’® (æ’¤é”€ã€é‡åšã€ä¿å­˜)
- é¡¹ç›®åˆå§‹åŒ–æ–‡æ¡ˆ

### 2. ç»„ä»¶åº“ (ComponentLibrary.tsx)
- ç»„ä»¶åº“æ ‡é¢˜
- ç»„ä»¶åˆ†ç±»åç§°
- ç»„ä»¶åç§°å’Œæè¿°

### 3. å±æ€§é¢æ¿ (PropertyPanel.tsx)
- å±æ€§é¢æ¿æ ‡é¢˜
- è¡¨å•æ ‡ç­¾å’Œå ä½ç¬¦
- ç©ºçŠ¶æ€æç¤º

### 4. ä¸»é¢˜åˆ‡æ¢ (ThemeSwitch.tsx)
- ä¸»é¢˜æ¨¡å¼åç§°
- åˆ‡æ¢æç¤ºæ–‡æ¡ˆ

### 5. è¯­è¨€åˆ‡æ¢ (LanguageSwitch.tsx)
- è¯­è¨€åç§°
- åˆ‡æ¢æç¤º

## æ·»åŠ æ–°çš„ç¿»è¯‘

### 1. åœ¨è¯­è¨€åŒ…ä¸­æ·»åŠ é”®å€¼

**zh-CN.json**
```json
{
  "newSection": {
    "newKey": "æ–°çš„ä¸­æ–‡æ–‡æ¡ˆ"
  }
}
```

**en-US.json**
```json
{
  "newSection": {
    "newKey": "New English text"
  }
}
```

### 2. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨

```tsx
const { t } = useTranslation();
return <div>{t('newSection.newKey')}</div>;
```

## è¯­è¨€æ£€æµ‹å’Œå­˜å‚¨

### è‡ªåŠ¨æ£€æµ‹é¡ºåº
1. æœ¬åœ°å­˜å‚¨ (`localStorage`)
2. æµè§ˆå™¨è¯­è¨€è®¾ç½®
3. HTML æ ‡ç­¾è¯­è¨€å±æ€§
4. é»˜è®¤è¯­è¨€ (zh-CN)

### æœ¬åœ°å­˜å‚¨
- é”®å: `i18nextLng`
- å€¼: `zh-CN` æˆ– `en-US`

## é…ç½®é€‰é¡¹

### i18n é…ç½® (src/i18n/index.ts)

```typescript
{
  fallbackLng: 'zh-CN',        // é»˜è®¤è¯­è¨€
  debug: process.env.NODE_ENV === 'development', // å¼€å‘æ¨¡å¼è°ƒè¯•
  detection: {
    order: ['localStorage', 'navigator', 'htmlTag'],
    caches: ['localStorage'],
  },
  interpolation: {
    escapeValue: false,         // React å·²å¤„ç† XSS
  },
}
```

## æœ€ä½³å®è·µ

### 1. é”®åå‘½åè§„èŒƒ
- ä½¿ç”¨ç‚¹åˆ†éš”çš„å±‚çº§ç»“æ„
- ä½¿ç”¨å°å†™å­—æ¯å’Œè¿å­—ç¬¦
- ä¿æŒè¯­ä¹‰åŒ–å‘½å

```json
{
  "components.button.name": "æŒ‰é’®",
  "components.button.types.primary": "ä¸»è¦"
}
```

### 2. æ–‡æ¡ˆç»„ç»‡
- æŒ‰åŠŸèƒ½æ¨¡å—åˆ†ç»„
- ä¿æŒä¸­è‹±æ–‡ç»“æ„ä¸€è‡´
- é¿å…æ·±å±‚åµŒå¥— (å»ºè®®ä¸è¶…è¿‡3å±‚)

### 3. å‚æ•°ä½¿ç”¨
- ä½¿ç”¨æ’å€¼è¯­æ³• `{{variable}}`
- æä¾›é»˜è®¤å€¼
- ä¿æŒå‚æ•°åç§°ä¸€è‡´

```json
{
  "placeholders.enterText": "è¯·è¾“å…¥{{label}}"
}
```

## æµ‹è¯•å’ŒéªŒè¯

### 1. è¯­è¨€åˆ‡æ¢æµ‹è¯•
- ç‚¹å‡»è¯­è¨€åˆ‡æ¢æŒ‰é’®
- éªŒè¯æ‰€æœ‰æ–‡æ¡ˆæ˜¯å¦æ­£ç¡®åˆ‡æ¢
- æ£€æŸ¥æœ¬åœ°å­˜å‚¨æ˜¯å¦ä¿å­˜

### 2. é¡µé¢åˆ·æ–°æµ‹è¯•
- åˆ‡æ¢è¯­è¨€ååˆ·æ–°é¡µé¢
- éªŒè¯è¯­è¨€è®¾ç½®æ˜¯å¦ä¿æŒ

### 3. æµè§ˆå™¨è¯­è¨€æµ‹è¯•
- æ¸…é™¤æœ¬åœ°å­˜å‚¨
- è®¾ç½®æµè§ˆå™¨è¯­è¨€
- éªŒè¯æ˜¯å¦è‡ªåŠ¨é€‰æ‹©å¯¹åº”è¯­è¨€

## æ•…éšœæ’é™¤

### 1. ç¿»è¯‘ä¸æ˜¾ç¤º
- æ£€æŸ¥é”®åæ˜¯å¦æ­£ç¡®
- ç¡®è®¤è¯­è¨€åŒ…ä¸­æ˜¯å¦å­˜åœ¨è¯¥é”®
- æŸ¥çœ‹æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯

### 2. è¯­è¨€åˆ‡æ¢ä¸ç”Ÿæ•ˆ
- æ£€æŸ¥ i18n æ˜¯å¦æ­£ç¡®åˆå§‹åŒ–
- ç¡®è®¤ useTranslation hook æ˜¯å¦æ­£ç¡®ä½¿ç”¨
- éªŒè¯è¯­è¨€åŒ…æ˜¯å¦æ­£ç¡®åŠ è½½

### 3. å‚æ•°æ’å€¼é—®é¢˜
- æ£€æŸ¥å‚æ•°åç§°æ˜¯å¦åŒ¹é…
- ç¡®è®¤æ’å€¼è¯­æ³•æ˜¯å¦æ­£ç¡®
- éªŒè¯å‚æ•°å€¼æ˜¯å¦ä¼ é€’

## æ‰©å±•æ”¯æŒ

### æ·»åŠ æ–°è¯­è¨€
1. åˆ›å»ºæ–°çš„è¯­è¨€åŒ…æ–‡ä»¶ (å¦‚ `ja-JP.json`)
2. åœ¨ `i18n/index.ts` ä¸­æ·»åŠ èµ„æº
3. æ›´æ–° `LanguageSwitch` ç»„ä»¶
4. æ·»åŠ è¯­è¨€æ£€æµ‹é€»è¾‘

### åŠ¨æ€åŠ è½½è¯­è¨€åŒ…
```typescript
// å¯ä»¥é…ç½®åŠ¨æ€å¯¼å…¥è¯­è¨€åŒ…
const resources = {
  'zh-CN': { translation: () => import('./locales/zh-CN.json') },
  'en-US': { translation: () => import('./locales/en-US.json') },
};
```

## æ€»ç»“

å›½é™…åŒ–åŠŸèƒ½å·²å®Œå…¨é›†æˆåˆ°é¡¹ç›®ä¸­ï¼Œæä¾›äº†ï¼š

- ğŸ¯ **å®Œæ•´çš„åŒè¯­æ”¯æŒ**
- ğŸ”„ **å®æ—¶è¯­è¨€åˆ‡æ¢**
- ğŸ’¾ **æŒä¹…åŒ–è¯­è¨€è®¾ç½®**
- ğŸ¨ **ç»Ÿä¸€çš„UIä½“éªŒ**
- ğŸ“± **å“åº”å¼è¯­è¨€åˆ‡æ¢ç»„ä»¶**

ç°åœ¨ç”¨æˆ·å¯ä»¥åœ¨ä¸­æ–‡å’Œè‹±æ–‡ä¹‹é—´è‡ªç”±åˆ‡æ¢ï¼Œäº«å—æœ¬åœ°åŒ–çš„ä½¿ç”¨ä½“éªŒï¼
